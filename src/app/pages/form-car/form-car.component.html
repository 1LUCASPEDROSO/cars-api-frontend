<div class="main-body">
    <form [formGroup]="entityForm" novalidate (ngSubmit)="Save()">
        <mat-card>
            <mat-card-header>
                <mat-card-title>{{formName}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="15px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">
                    @if(editmode){
                        <div class="col" fxFlex="49" fxFlex.sm="100" fxFlex.xs="100">
                           <label>Modelo Atual</label>
                            <mat-form-field>
                                <input type="text" placeholder="Selecione o modelo" matInput [value]="modelName">   
                            </mat-form-field>    
                        </div>
                    }
                    @else{
                    <div class="col" fxFlex="49" fxFlex.sm="100" fxFlex.xs="100">
                        <mat-label>Selecione o modelo</mat-label>
                        <mat-form-field>
                            <input type="text" placeholder="Selecione o modelo" matInput formControlName="model_id"
                                [matAutocomplete]="auto">
                            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" [displayWith]="displayModelName">
                                @for (option of models; track option) {
                                <mat-option [value]="option.id">{{option.name}}</mat-option>
                                }
                            </mat-autocomplete>
                        </mat-form-field>    
                    </div>
                    }
                    <div class="col" fxFlex="49" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Ano</label>
                        <mat-form-field>
                            <input matInput placeholder="Digite o ano do modelo" formControlName="year"
                                class="ipt-fipe">
                            @if (entityForm.controls['year'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }
                        </mat-form-field>
                    </div>
                      <div class="col" fxFlex="49" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Tipo de combustivel</label>
                        <mat-form-field appearance="fill">
                            <mat-select placeholder="Selecione o tipo de combustivel" formControlName="gas_type">
                                   @for (option of gasTypeOptions; track option) {
                                <mat-option [value]="option.value">{{option.label}}</mat-option>
                                }
                            </mat-select>
                            @if (entityForm.controls['gas_type'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }
                        </mat-form-field>
                    </div>   
                    <div class="col" fxFlex="49" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Numero de portas</label>
                        <mat-form-field>
                            <input type="number" matInput placeholder="Digite o numero de portas" formControlName="num_doors">
                            @if (entityForm.controls['num_doors'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }
                        </mat-form-field>
                    </div>
                    <div class="col" fxFlex="49" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Cor do modelo</label>
                        <mat-form-field>
                            <input matInput placeholder="Digite a cor do modelo" formControlName="color">
                            @if (entityForm.controls['color'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }
                        </mat-form-field>
                    </div>
                </div>

            </mat-card-content>
            <mat-card-actions>
                <button routerLink="{{listPage}}" mat-raised-button type="button" tabindex="-1">Cancelar</button>
                <button mat-raised-button color="primary" type="submit">Salvar</button>
            </mat-card-actions>
        </mat-card>
    </form>
</div>